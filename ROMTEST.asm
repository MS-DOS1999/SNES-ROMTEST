.include "SNES-ROMTEST\header.asm"
.include "SNES-ROMTEST\snes.asm"

Main:

	xce
	
	rep #$10 ;x et y en 16 bit
	
	SNES_INIT

	SNES_INIDISP $8F

	SNES_BGMODE $00
	SNES_BG1SC $10
	SNES_BGNBA $00 $00
	
	SNES_OBJSEL $A3
	
	SNES_TM $11
	
	SNES_VMAINC $80
	
	
	SNES_DMA0 $00
	SNES_DMA1 $00
	
	SNES_DMA0_BADD $22
	SNES_DMA1_BADD $22
	
	SNES_CGADD $00
	
	SNES_DMA0_ADD Palette1 $0008
	SNES_DMA1_ADD Palette2 $0008
	
	SNES_MDMAEN $03
	
	SNES_CGADD $80
	SNES_DMA0_ADD pallette_perso $0018
	SNES_MDMAEN $01
	
	
	SNES_DMA0 $01
	SNES_DMA0_BADD $18
	
	SNES_VMADD $0000
	
	SNES_DMA0_ADD Data $0016
	
	SNES_MDMAEN $01
	
	SNES_VMADD $6000
	
	SNES_DMA0_ADD Sprite $0800
	
	SNES_MDMAEN $01
	
	SNES_VMADD $1000
	
	SNES_DMA0_ADD Tileset $0020
	
	SNES_MDMAEN $01
	

	SNES_INIDISP $0F
	
	SNES_NMITIMEN $81
	
	;x sprite 1
    lda #0 
    sta 0 
    
    ;y sprite 1
    lda #100 
    sta 1
	
	
	Game:
		wai
		
		lda STDCONTROL1H
		and #$01
		cmp #$01
		bne +
		
			inc 0
			
		+:
		lda STDCONTROL1H
		and #$02
		cmp #$02
		bne +
		
			dec 0
			
		+:
		lda STDCONTROL1H
		and #$04
		cmp #$04
		bne +
		
			inc 1
		
		+:
		lda STDCONTROL1H
		and #$08
		cmp #$08
		bne +
		
			dec 1
			
		+:
		
	jmp Game
	
VBlank:
	;on balance l'oam ici, tous ce qui doit etre mis à jour en temps réel à l'écran en fait
	lda #00
	sta OAMADDL
	
	lda 0
	sta OAMDATA
	
	lda 1
	sta OAMDATA
	
	lda #0
	sta OAMDATA
	
	lda #$20
	sta OAMDATA
	
	rti
		
		
		
		
		
.bank 1 slot 0
.org 0

Palette1:
	.dw %0000000000000000, %0001111100000000, %1110000000000011, %0000000011111000
	
Palette2:
	.dw %1111111110000000, %0101010101010001, %1101011010111000, %0000111101011011
	
Data: 
    .dw $00FF , $00FF , $FF00 , $FF00 , $FFFF , $FFFF  , $0000 , $0000
    .dw $00FF , $00FF , $00FF , $00FF , $00FF , $00FF  , $00FF , $00FF
	
Tileset: 
    .dw $0000 , $0001 , $0001 , $0001 , $0001 , $0001  , $0001 , $0001  
    .dw $0401 , $0401 , $0401 , $0401 , $0401 , $0401  , $0401 , $0401		
	
Sprite:
    .db $00,$00,$00,$00,$01,$00,$02,$01,$04,$01,$04,$01,$04,$01,$02,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$02,$00,$02,$00,$01,$00
    .db $00,$00,$e0,$00,$10,$e0,$28,$f0,$76,$f8,$27,$f8,$07,$f8,$09,$f0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$06,$00,$01,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$c0,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$01,$00,$02,$01,$04,$01,$04,$01,$04,$01,$02,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$02,$00,$02,$00,$01,$00
    .db $00,$00,$e0,$00,$10,$e0,$28,$f0,$76,$f8,$27,$f8,$07,$f8,$09,$f0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$06,$00,$01,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$c0,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$01,$00,$02,$01,$04,$01,$04,$01,$04,$01,$02,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$02,$00,$02,$00,$01,$00
    .db $00,$00,$e0,$00,$10,$e0,$28,$f0,$76,$f8,$27,$f8,$07,$f8,$09,$f0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$06,$00,$01,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$c0,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$01,$00,$02,$01,$04,$01,$04,$01,$04,$01,$02,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$02,$00,$02,$00,$02,$00,$01,$00
    .db $00,$00,$e0,$00,$10,$e0,$28,$f0,$76,$f8,$27,$f8,$07,$f8,$09,$f0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$06,$00,$01,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00,$c0,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $11,$00,$ff,$00,$40,$3f,$80,$7f,$80,$7f,$80,$73,$a0,$41,$a4,$41
    .db $e0,$00,$00,$00,$3f,$00,$7f,$00,$7f,$00,$73,$0c,$41,$3e,$41,$3a
    .db $c0,$00,$fe,$00,$03,$fe,$01,$ff,$01,$ff,$00,$f3,$20,$c1,$24,$c1
    .db $80,$00,$00,$00,$fe,$00,$ff,$00,$ff,$00,$f3,$0c,$c1,$3e,$c1,$3a
    .db $00,$00,$00,$00,$00,$00,$80,$00,$80,$00,$80,$00,$80,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $11,$00,$ff,$00,$40,$3f,$80,$7f,$80,$7f,$80,$73,$a0,$41,$a4,$41
    .db $e0,$00,$00,$00,$3f,$00,$7f,$00,$7f,$00,$73,$0c,$41,$3e,$41,$3a
    .db $c0,$00,$fe,$00,$03,$fe,$01,$ff,$01,$ff,$00,$f3,$20,$c1,$24,$c1
    .db $80,$00,$00,$00,$fe,$00,$ff,$00,$ff,$00,$f3,$0c,$c1,$3e,$c1,$3a
    .db $00,$00,$00,$00,$00,$00,$80,$00,$80,$00,$80,$00,$80,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $11,$00,$ff,$00,$40,$3f,$80,$7f,$80,$7f,$80,$73,$a0,$41,$a4,$41
    .db $e0,$00,$00,$00,$3f,$00,$7f,$00,$7f,$00,$73,$0c,$41,$3e,$41,$3a
    .db $c0,$00,$fe,$00,$03,$fe,$01,$ff,$01,$ff,$00,$f3,$20,$c1,$24,$c1
    .db $80,$00,$00,$00,$fe,$00,$ff,$00,$ff,$00,$f3,$0c,$c1,$3e,$c1,$3a
    .db $00,$00,$00,$00,$00,$00,$80,$00,$80,$00,$80,$00,$80,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $11,$00,$ff,$00,$40,$3f,$80,$7f,$80,$7f,$80,$73,$a0,$41,$a4,$41
    .db $e0,$00,$00,$00,$3f,$00,$7f,$00,$7f,$00,$73,$0c,$41,$3e,$41,$3a
    .db $c0,$00,$fe,$00,$03,$fe,$01,$ff,$01,$ff,$00,$f3,$20,$c1,$24,$c1
    .db $80,$00,$00,$00,$fe,$00,$ff,$00,$ff,$00,$f3,$0c,$c1,$3e,$c1,$3a
    .db $00,$00,$00,$00,$00,$00,$80,$00,$80,$00,$80,$00,$80,$00,$80,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$0f,$01,$0f,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$03,$04
    .db $a4,$41,$90,$63,$8c,$73,$80,$7f,$80,$7f,$c0,$3f,$e0,$9f,$e0,$80
    .db $41,$3a,$63,$1c,$73,$0c,$7f,$00,$7f,$00,$bf,$00,$c0,$1f,$df,$00
    .db $24,$c1,$10,$e3,$0c,$f3,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$01,$01
    .db $c1,$3a,$e3,$1c,$f3,$0c,$ff,$00,$ff,$00,$ff,$00,$00,$ff,$fe,$01
    .db $80,$00,$80,$00,$80,$00,$80,$00,$c0,$00,$e0,$00,$f0,$00,$f0,$80
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$20,$40,$00,$a0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$0f,$01,$0f,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$03,$04
    .db $a4,$41,$90,$63,$8c,$73,$80,$7f,$80,$7f,$c0,$3f,$e0,$9f,$e0,$80
    .db $41,$3a,$63,$1c,$73,$0c,$7f,$00,$7f,$00,$bf,$00,$c0,$1f,$df,$00
    .db $24,$c1,$10,$e3,$0c,$f3,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$01,$01
    .db $c1,$3a,$e3,$1c,$f3,$0c,$ff,$00,$ff,$00,$ff,$00,$00,$ff,$fe,$01
    .db $80,$00,$80,$00,$80,$00,$80,$00,$c0,$00,$e0,$00,$f0,$00,$f0,$80
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$20,$40,$00,$a0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$0f,$01,$0f,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$03,$04
    .db $a4,$41,$90,$63,$8c,$73,$80,$7f,$80,$7f,$c0,$3f,$e0,$9f,$e0,$80
    .db $41,$3a,$63,$1c,$73,$0c,$7f,$00,$7f,$00,$bf,$00,$c0,$1f,$df,$00
    .db $24,$c1,$10,$e3,$0c,$f3,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$01,$01
    .db $c1,$3a,$e3,$1c,$f3,$0c,$ff,$00,$ff,$00,$ff,$00,$00,$ff,$fe,$01
    .db $80,$00,$80,$00,$80,$00,$80,$00,$c0,$00,$e0,$00,$f0,$00,$f0,$80
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$20,$40,$00,$a0
    .db $00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$0f,$01,$0f,$00
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$03,$00,$07,$00,$03,$04
    .db $a4,$41,$90,$63,$8c,$73,$80,$7f,$80,$7f,$c0,$3f,$e0,$9f,$e0,$80
    .db $41,$3a,$63,$1c,$73,$0c,$7f,$00,$7f,$00,$bf,$00,$c0,$1f,$df,$00
    .db $24,$c1,$10,$e3,$0c,$f3,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$01,$01
    .db $c1,$3a,$e3,$1c,$f3,$0c,$ff,$00,$ff,$00,$ff,$00,$00,$ff,$fe,$01
    .db $80,$00,$80,$00,$80,$00,$80,$00,$c0,$00,$e0,$00,$f0,$00,$f0,$80
    .db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$40,$00,$20,$40,$00,$a0
    .db $0f,$00,$07,$00,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $03,$04,$01,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $e0,$00,$c0,$00,$80,$7f,$40,$3f,$40,$3f,$7f,$00,$00,$00,$00,$00
    .db $c0,$1f,$bf,$00,$00,$7f,$3f,$00,$3f,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$ff,$07,$f8,$03,$fe,$fe,$00,$00,$00,$00,$00
    .db $00,$ff,$ff,$00,$00,$ff,$fe,$00,$fe,$00,$00,$00,$00,$00,$00,$00
    .db $f0,$80,$60,$00,$c0,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$a0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $0f,$00,$07,$00,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $03,$04,$01,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $e0,$00,$c0,$00,$80,$7f,$40,$3f,$40,$3f,$7f,$00,$00,$00,$00,$00
    .db $c0,$1f,$bf,$00,$00,$7f,$3f,$00,$3f,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$ff,$07,$f8,$03,$fe,$fe,$00,$00,$00,$00,$00
    .db $00,$ff,$ff,$00,$00,$ff,$fe,$00,$fe,$00,$00,$00,$00,$00,$00,$00
    .db $f0,$80,$60,$00,$c0,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$a0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $0f,$00,$07,$00,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $03,$04,$01,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $e0,$00,$c0,$00,$80,$7f,$40,$3f,$40,$3f,$7f,$00,$00,$00,$00,$00
    .db $c0,$1f,$bf,$00,$00,$7f,$3f,$00,$3f,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$ff,$07,$f8,$03,$fe,$fe,$00,$00,$00,$00,$00
    .db $00,$ff,$ff,$00,$00,$ff,$fe,$00,$fe,$00,$00,$00,$00,$00,$00,$00
    .db $f0,$80,$60,$00,$c0,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$a0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $0f,$00,$07,$00,$03,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $03,$04,$01,$02,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $e0,$00,$c0,$00,$80,$7f,$40,$3f,$40,$3f,$7f,$00,$00,$00,$00,$00
    .db $c0,$1f,$bf,$00,$00,$7f,$3f,$00,$3f,$00,$00,$00,$00,$00,$00,$00
    .db $00,$00,$00,$00,$00,$ff,$07,$f8,$03,$fe,$fe,$00,$00,$00,$00,$00
    .db $00,$ff,$ff,$00,$00,$ff,$fe,$00,$fe,$00,$00,$00,$00,$00,$00,$00
    .db $f0,$80,$60,$00,$c0,$00,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00
    .db $00,$a0,$80,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00


pallette_perso:
    .db  $1f,$7c,$21,$04,$1f,$00,$5f,$2d,$1d,$04,$5d,$09,$5d,$05,$7f,$02,$ff,$7f,$17,$05,$18,$00,$3f,$0c
